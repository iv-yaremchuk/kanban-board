{"ast":null,"code":"import _slicedToArray from \"/home/ivan/web/skillfactory/React/kanban-board-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/ivan/web/skillfactory/React/kanban-board-main/src/components/main/card/CardItem.jsx\";\nimport React, { useState, useRef, useEffect } from 'react';\nimport './style.css';\nimport { Link, Outlet, useLocation } from 'react-router-dom';\nfunction CardItem(props) {\n  var _this2 = this;\n  var type = props.type,\n    tasks = props.tasks,\n    setTasks = props.setTasks,\n    createNewTask = props.createNewTask,\n    prevTaskList = props.prevTaskList;\n  var location = useLocation();\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    active = _useState2[0],\n    setActive = _useState2[1];\n  var inputValueRef = useRef(null);\n  useEffect(function () {\n    setTasks(props);\n  }, [tasksCopy]);\n  var AddButton = /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function onClick() {\n      setActive(true);\n    },\n    className: prevTaskList.length || props.title === 'Backlog' ? 'card__btn--add is-active' : 'card__btn--add',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    className: \"btn-icon\",\n    width: \"14\",\n    height: \"14\",\n    viewBox: \"0 0 14 14\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 6H8V1C8 0.448 7.552 0 7 0C6.448 0 6 0.448 6 1V6H1C0.448 6 0 6.448 0 7C0 7.552 0.448 8 1 8H6V13C6 13.552 6.448 14 7 14C7.552 14 8 13.552 8 13V8H13C13.552 8 14 7.552 14 7C14 6.448 13.552 6 13 6Z\",\n    fill: \"currentColor\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  })), \"Add card\");\n  function CardItemFormOrSelect() {\n    var _this = this;\n    var handleSubmit = function handleSubmit(e) {\n      e.preventDefault();\n      if (inputValueRef.current.value.trim()) {\n        createNewTask(inputValueRef.current.value);\n      }\n      setActive(false);\n    };\n\n    // useEffect(() => {\n    //   JSON.parse(window.localStorage.getItem('tasks'))\n    // }, [tasks]);\n\n    var statusChange = function statusChange(e, status) {\n      var tasksList = JSON.parse(window.localStorage.getItem('tasks'));\n      var tasksCopy = tasksList.map(function (task) {\n        if (task.id === e.target.value) {\n          task.status = status;\n        }\n        return task;\n      });\n      setTasks(tasksCopy);\n      setActive(false);\n    };\n    if (type === 'backlog') {\n      return /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"card__form\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        id: \"title\",\n        className: \"card__input\",\n        ref: inputValueRef,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"card__btn--submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }\n      }, \"Submit\"));\n    } else {\n      return /*#__PURE__*/React.createElement(\"select\", {\n        className: \"card__select\",\n        onChange: function onChange(e) {\n          return statusChange(e, type);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: 'default',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }\n      }, \"Select task\"), prevTaskList.map(function (task) {\n        return /*#__PURE__*/React.createElement(\"option\", {\n          className: \"card__option\",\n          key: task.id,\n          value: task.id,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 15\n          }\n        }, task.title);\n      }));\n    }\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"card__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }\n  }, props.title), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"card__list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, tasks.length ? tasks.map(function (task) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: task.id,\n      className: \"card__item\",\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      className: \"card__link\",\n      to: \"/tasks/\".concat(task.id),\n      state: {\n        background: location\n      },\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"card__subtitle\",\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, task.title)), /*#__PURE__*/React.createElement(Outlet, {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }));\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, \"No tasks added yet\")), !active ? AddButton : /*#__PURE__*/React.createElement(CardItemFormOrSelect, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 30\n    }\n  }));\n}\nexport default CardItem;","map":{"version":3,"names":["React","useState","useRef","useEffect","Link","Outlet","useLocation","CardItem","props","_this2","type","tasks","setTasks","createNewTask","prevTaskList","location","_useState","_useState2","_slicedToArray","active","setActive","inputValueRef","tasksCopy","AddButton","createElement","onClick","className","length","title","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","width","height","viewBox","fill","xmlns","d","CardItemFormOrSelect","_this","handleSubmit","e","preventDefault","current","value","trim","statusChange","status","tasksList","JSON","parse","window","localStorage","getItem","map","task","id","target","onSubmit","ref","onChange","key","to","concat","state","background"],"sources":["/home/ivan/web/skillfactory/React/kanban-board-main/src/components/main/card/CardItem.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport './style.css';\nimport { Link, Outlet, useLocation } from 'react-router-dom';\n\nfunction CardItem(props) {\n  const { type, tasks, setTasks, createNewTask, prevTaskList } = props;\n  const location = useLocation();\n  const [active, setActive] = useState(false);\n  const inputValueRef = useRef(null);\n\n  useEffect(() => {\n    setTasks(props)\n  }, [tasksCopy]);\n\n  const AddButton = (\n    <button\n      onClick={() => {\n        setActive(true);\n      }}\n      className={\n        prevTaskList.length || props.title === 'Backlog'\n          ? 'card__btn--add is-active'\n          : 'card__btn--add'\n      }\n    >\n      <svg\n        className=\"btn-icon\"\n        width=\"14\"\n        height=\"14\"\n        viewBox=\"0 0 14 14\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M13 6H8V1C8 0.448 7.552 0 7 0C6.448 0 6 0.448 6 1V6H1C0.448 6 0 6.448 0 7C0 7.552 0.448 8 1 8H6V13C6 13.552 6.448 14 7 14C7.552 14 8 13.552 8 13V8H13C13.552 8 14 7.552 14 7C14 6.448 13.552 6 13 6Z\"\n          fill=\"currentColor\"\n        />\n      </svg>\n      Add card\n    </button>\n  );\n\n\n\n  function CardItemFormOrSelect() {\n    const handleSubmit = (e) => {\n      e.preventDefault();\n      if (inputValueRef.current.value.trim()) {\n        createNewTask(inputValueRef.current.value);\n      }\n      setActive(false);\n    };\n\n\n    // useEffect(() => {\n    //   JSON.parse(window.localStorage.getItem('tasks'))\n    // }, [tasks]);\n\n\n\n    const statusChange = (e, status) => {\n      \n      const tasksList = JSON.parse(window.localStorage.getItem('tasks'));      \n      const tasksCopy = tasksList.map((task) => {\n        if (task.id === e.target.value) {\n          task.status = status;\n        }\n        return task;\n      });\n\n      setTasks(tasksCopy);\n      setActive(false);\n\n\n    };\n\n\n\n    if (type === 'backlog') {\n      return (\n        <form onSubmit={handleSubmit} className=\"card__form\">\n          <input\n            type=\"text\"\n            id=\"title\"\n            className=\"card__input\"\n            ref={inputValueRef}\n          />\n          <button type=\"submit\" className=\"card__btn--submit\">\n            Submit\n          </button>\n        </form>\n      );\n    } else {\n      return (\n        <select\n          className=\"card__select\"\n          onChange={(e) => statusChange(e, type)}\n        >\n          <option value={'default'}>Select task</option>\n          {prevTaskList.map((task) => {\n            return (\n              <option className='card__option' key={task.id} value={task.id}>\n                {task.title}\n              </option>\n            );\n          })}\n        </select>\n      );\n    }\n  }\n\n  return (\n    <div className=\"card\">\n      <h2 className=\"card__title\">{props.title}</h2>\n      <ul className=\"card__list\">\n        {tasks.length ? (\n          tasks.map((task) => (\n            <li key={task.id} className=\"card__item\">\n              <Link className='card__link' to={`/tasks/${task.id}`} state={{ background: location }}>\n                <h2 className=\"card__subtitle\">{task.title}</h2>\n              </Link>\n              <Outlet />\n            </li>\n          ))\n        ) : (\n          <p className='card__text'>No tasks added yet</p>\n        )}\n      </ul>\n      {!active ? AddButton : <CardItemFormOrSelect />}\n    </div>\n  );\n}\n\nexport default CardItem;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}